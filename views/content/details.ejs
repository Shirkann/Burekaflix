<% layout('layout') -%>

<div class="grid" style="display:grid; gap:16px; grid-template-columns:1fr 1.2fr">
  <img
    src="<%= content.posterUrl %>"
    alt="<%= content.title %>"
    style="width:100%; border-radius:16px"
  />

  <div>
    <h2><%= content.title %></h2>
    <p class="meta">
      <%= content.year %> • <%= (content.genres || []).join(' / ') %>
    </p>
    <p><%= content.summary %></p>

    <% if (content.rating) { %>
      <p>דירוג IMDb: <strong><%= content.rating %></strong></p>
    <% } %>

    <div style="display:flex; gap:8px; margin-top:8px">
      <% if (content.videoUrl) { %>
        <a class="btn" href="<%= content.videoUrl %>" target="_blank">▶︎ טריילר</a>
      <% } %>

      <form
        method="post"
        action="/content/<%= content._id %>/like"
        onsubmit='event.preventDefault(); fetch(this.action,{method:"POST"}).then(()=>location.reload())'
      >
        <button class="btn">♡ למועדפים</button>
      </form>

      <% if (content.wikipedia) { %>
        <a class="btn" href="<%= content.wikipedia %>" target="_blank">ויקיפדיה</a>
      <% } %>
    </div>
  </div>
</div>

<h3 style="margin-top:18px">דומים</h3>

<div class="scroller">
  <% similar.forEach(i => { %>
    <a class="card" href="/content/<%= i._id %>">
      <img src="<%= i.posterUrl %>" />
      <div class="info">
        <h4><%= i.title %></h4>
        <div class="meta"><%= i.year %></div>
      </div>
    </a>
  <% }) %>
</div>
